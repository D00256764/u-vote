{% extends "base.html" %}

{% block title %}Dashboard - Secure Voting System{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2><i class="bi bi-speedometer2"></i> My Elections</h2>
            <a href="/elections/create" class="btn btn-primary">
                <i class="bi bi-plus-circle"></i> Create Election
            </a>
        </div>

        {% if elections %}
            <div class="row">
                {% for election in elections %}
                    <div class="col-md-6 col-lg-4 mb-4">
                        <div class="card h-100 shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title">{{ election.title }}</h5>
                                <p class="card-text">
                                    <span class="badge 
                                        {% if election.status == 'draft' %}bg-secondary
                                        {% elif election.status == 'open' %}bg-success
                                        {% else %}bg-danger{% endif %}">
                                        {{ election.status|upper }}
                                    </span>
                                </p>
                                <p class="card-text text-muted small">
                                    <i class="bi bi-calendar"></i> 
                                    Created: {{ election.created_at[:16] }}
                                </p>
                                {% if election.opened_at %}
                                    <p class="card-text text-muted small">
                                        <i class="bi bi-unlock"></i> 
                                        Opened: {{ election.opened_at[:16] }}
                                    </p>
                                {% endif %}
                                {% if election.closed_at %}
                                    <p class="card-text text-muted small">
                                        <i class="bi bi-lock"></i> 
                                        Closed: {{ election.closed_at[:16] }}
                                    </p>
                                {% endif %}
                            </div>
                            <div class="card-footer bg-white">
                                <a href="/elections/{{ election.id }}/detail" 
                                   class="btn btn-sm btn-outline-primary">
                                    <i class="bi bi-eye"></i> View Details
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i> 
                No elections created yet. Click "Create Election" to get started.
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
